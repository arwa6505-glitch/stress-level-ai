<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Stress Level Detection AI</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --accent:#ff7fa5;
  --accent-hover:#ff5c8f;
  --bg:#fff6fa;
  --card:#ffffff;
  --border:#ffd6e4;
  --text:#3a2a2f;
  --muted:#6b4b55;
  --shadow:rgba(255,127,165,0.15);
}

*{ box-sizing:border-box; }

html, body{
  width:100%;
  overflow-x:hidden;
}

body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:var(--bg);
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  text-align:center;
  padding:20px;
}

.wrapper{ width:100%; max-width:680px; }

h1{
  margin:0 0 20px;
  color:var(--accent);
  font-weight:600;
}

.container{
  background:var(--card);
  padding:30px;
  border-radius:25px;
  box-shadow:0 20px 45px var(--shadow);
  border:1px solid #ffe1ea;
}

textarea{
  width:100%;
  height:150px;
  padding:14px;
  font-size:16px;
  border-radius:20px;
  border:2px solid var(--border);
  outline:none;
  resize:none;
  font-family:inherit;
  background:#fffafb;
  transition:0.2s ease;
  display:block;
}
textarea:focus{ border-color:var(--accent); }

.row{ margin-top:15px; }

button{
  padding:12px 22px;
  font-size:16px;
  border:none;
  border-radius:999px;
  background:var(--accent);
  color:white;
  cursor:pointer;
  font-weight:600;
  transition:0.2s ease;
  margin:5px;
  white-space:nowrap;
}
button:hover{ background:var(--accent-hover); }

.ghost{
  background:#ffe1ea;
  color:#6b4b55;
}
.ghost:hover{ background:#ffd0de; }

.voice{
  background:#ffc1d5;
  color:#5a2a3a;
}
.voice:hover{ background:#ffb0cb; }

.status{
  margin-top:8px;
  font-size:13px;
  color:var(--muted);
  min-height:18px;
}

.resultBox{
  margin-top:20px;
  padding:15px;
  border-radius:18px;
  background:#fff6f9;
  border:1px solid #ffe1ea;
}

.result{
  font-size:20px;
  font-weight:600;
}
.confidence{
  margin-top:6px;
  font-size:14px;
  color:var(--muted);
}

.low{ color:#2e7d32; }
.medium{ color:#b26a00; }
.high{ color:#b00020; }

.debug{ display:none !important; }
</style>
</head>

<body>
<div class="wrapper">
  <h1>Stress Level Detection AI</h1>

  <div class="container">
    <textarea id="inputText" placeholder="Type something or use voice..."></textarea>

    <div class="row">
      <button onclick="predictStress()">Analyze</button>
      <button class="voice" id="voiceBtn" onclick="toggleVoice()">Voice Input</button>
      <button class="ghost" onclick="clearAll()">Clear</button>
    </div>

    <div class="status" id="status"></div>

    <div class="resultBox">
      <div class="result" id="result">Predicted Stress Level: â€”</div>
      <div class="confidence" id="confidence">Confidence: â€”</div>
    </div>

    <div class="debug" id="debug"></div>
  </div>
</div>

<script>
function predictStress(){
  const raw = (document.getElementById("inputText").value || "").trim();
  const text = raw.toLowerCase();
  const words = text.match(/[a-z']+/g) || [];

  const highPhrases = [
    "i hate",
    "i'm so sick of","im so sick of",
    "why are you doing this to me",
    "i can't do this","i cant do this",
    "i don't know what to do","i dont know what to do",
    "please help","help me",
    "i'm done","im done",
    "i give up",
    "everything is too much",
    "i can't handle it","i cant handle it",
    "i want to disappear"
  ];

  const positivePhrases = [
    "i'm so excited","im so excited",
    "i can't wait","i cant wait",
    "oh my god that looks so good",
    "this is amazing",
    "i love this",
    "i'm so happy","im so happy"
  ];

  const highWords = [
    "hate","angry","furious","panic","stressed","anxious","overwhelmed",
    "pressure","hopeless","crying","terrified"
  ];

  const mediumWords = [
    "nervous","tired","busy","frustrated","upset","annoyed","confused"
  ];

  const lowWords = [
    "calm","relaxed","peaceful","fine","okay","good","content","happy","excited"
  ];

  const sadEmoji = (raw.match(/ðŸ˜­|ðŸ˜¢|ðŸ˜°|ðŸ˜ž|ðŸ˜Ÿ|ðŸ˜¿/g) || []).length;
  const angryEmoji = (raw.match(/ðŸ˜¡|ðŸ¤¬|ðŸ˜ /g) || []).length;
  const calmEmoji = (raw.match(/ðŸ˜Š|ðŸ˜Œ|ðŸ™‚|âœ¨|ðŸ’—|ðŸŒ¸/g) || []).length;

  let score = 0;

  highPhrases.forEach(p=>{ if(text.includes(p)) score+=8; });
  positivePhrases.forEach(p=>{ if(text.includes(p)) score-=6; });

  highWords.forEach(w=>{ if(text.includes(w)) score+=5; });
  mediumWords.forEach(w=>{ if(text.includes(w)) score+=3; });
  lowWords.forEach(w=>{ if(text.includes(w)) score-=3; });

  score += sadEmoji * 2;
  score += angryEmoji * 2;
  score -= calmEmoji * 1;

  renderResult(score);
}

function renderResult(score){
  let level="Low", cls="low";
  if(score>=10){ level="High"; cls="high"; }
  else if(score>=4){ level="Medium"; cls="medium"; }

  const confidence=Math.min(100,Math.round(45+Math.min(55,Math.abs(score)*6)));

  const resultDiv=document.getElementById("result");
  resultDiv.className="result "+cls;
  resultDiv.textContent="Predicted Stress Level: "+level;

  document.getElementById("confidence").textContent="Confidence: "+confidence+"%";
}

function clearAll(){
  document.getElementById("inputText").value="";
  document.getElementById("result").textContent="Predicted Stress Level: â€”";
  document.getElementById("confidence").textContent="Confidence: â€”";
}

const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
let recognizer=null;
let listening=false;

function toggleVoice(){
  if(!SpeechRecognition){
    document.getElementById("status").textContent="Voice not supported.";
    return;
  }

  if(!recognizer){
    recognizer=new SpeechRecognition();
    recognizer.lang="en-US";
    recognizer.interimResults=false;
    recognizer.continuous=false;

    recognizer.onstart=()=>{
      listening=true;
      document.getElementById("voiceBtn").textContent="Stop Voice";
      document.getElementById("status").textContent="Listeningâ€¦";
    };

    recognizer.onresult=(event)=>{
      const transcript=event.results[0][0].transcript;
      document.getElementById("inputText").value=transcript;
      predictStress();
    };

    recognizer.onend=()=>{
      listening=false;
      document.getElementById("voiceBtn").textContent="Voice Input";
      document.getElementById("status").textContent="";
    };
  }

  if(!listening){
    recognizer.start();
  } else {
    recognizer.stop();
  }
}
</script>
</body>
</html>
